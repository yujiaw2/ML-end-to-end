# ML Deploy Demo

This project demonstrates a minimal, end-to-end machine learning deployment system using scikit-learn, FastAPI, and Uvicorn. The service loads a pre-trained model and exposes HTTP endpoints for prediction.

## ğŸ“ Project Structure

```
ml-deploy-demo/
â”œâ”€â”€ app/                # FastAPI application code
â”‚   â””â”€â”€ main.py         # API endpoints and model serving logic
â”œâ”€â”€ models/             # Trained model file (model.pkl)
â”œâ”€â”€ notebooks/          # One-off scripts and notebooks like model training
â”‚   â””â”€â”€ 01.train.ipynb
â”œâ”€â”€ log/                # Log files generated by FastAPI service
â”‚   â””â”€â”€ prediction.log
â”œâ”€â”€ tests/              # test functions
â”‚   â””â”€â”€ test_predict    
â”œâ”€â”€ requirements.txt    # Python dependencies
â”œâ”€â”€ Dockerfile          # Container build file
â”œâ”€â”€ docker-compose.yml  # Container service configuration
â””â”€â”€ README.md           # Project documentation
```

## ğŸš€ Quick Start

### 1. Set up virtual environment
```bash
python3 -m venv venv
source venv/bin/activate  # or venv\Scripts\activate on Windows
pip install -r requirements.txt
```

### 2. Train and save model
Refer to `notebooks/01.train.ipynb`

### 3. Run with Docker Compose
```bash
docker compose up --build
```

Visit Swagger UI at: [http://localhost:8000/docs](http://localhost:8000/docs)

## ğŸ” API Endpoints

### `/predict` (POST)
Predict on a single input vector of 8 features (adjust as needed).
```json
[8.3252,41,6.98412698,1.02380952,322,2.55555556,37.88,-122.23]
```
Response:
```json
{
  "input": [8.3252,41,6.98412698,1.02380952,322,2.55555556,37.88,-122.23],
  "prediction": 4.265793
}
```

### `/predict_batch` (POST)
Predict on multiple input vectors.
```json
[
  [8.3252,41,6.98412698,1.02380952,322,2.55555556,37.88,-122.23],
  [7.2574,52,8.28813559,1.07344633,496,2.80225989,37.85, -122.24]
]
```
Response:
```json
{
  "predictions": [4.265793, 1.85]
}
```

## ğŸªµ Logging
All requests and predictions are logged to `log/prediction.log` with timestamps.


## ğŸ§ª Testing
### 1. Install pytest
```bash
pip install pytest
```

### 2. Run tests
```bash
pytest tests/
```

Tests are located in the `tests/` directory. You can test model loading, API responses, and edge cases.



## ğŸ§± Tech Stack
- Python 3.10+
- scikit-learn
- FastAPI
- Uvicorn
- joblib
- numpy
- Docker
- Docker Compose

## ğŸ“Œ Future Extensions
- `.env` config support for model/log paths
- Input validation with feature schema (pydantic)
- Model versioning (e.g., MLflow)
- CI/CD integration (GitHub Actions)
- Frontend interface (e.g., Streamlit or React)

---

Feel free to fork, adapt, and build on this template!